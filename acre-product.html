<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-image/iron-image.html">
<link rel="import" href="../iron-flex-layout/classes/iron-flex-layout.html">
<!--
An element providing a solution to no problem in particular.

Example:

    <acre-product></acre-product>

### Styling

The following custom properties and mixins are available for styling: 
  
Custom property | Description | Default 
----------------|-------------|---------- 
`--acre-button-color` | The button color | `--accent-color` 

@demo demo/index.html
@hero hero.svg

-->

<dom-module id="acre-product">
  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
        background-color: white;
        padding: 10px;
        font-family: 'Open Sans', sans-serif;
      }
      
      .container:hover {
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
      }
      
      .name {
        text-align: center;
        font-weight: bold;
      }
      
      .description {
        text-align: center;
        text-transform: uppercase;
        font-size: 12px;
      }
      
      .price {
        text-align: center;
        font-weight: bold;
      }
      
      button {
        color: #fff;
        padding: 6px 12px;
        margin: 10x;
        font-size: 14px;
        font-weight: 400;
        line-height: 1.42857143;
        cursor: pointer;
        border: 1px solid transparent;
        text-align: center;
        background-color: var(--acre-button-color, --accent-color);
        border-color: var(--acre-button-color, --color-accent);
      }
      
      button:hover{
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
      }
      
    </style>

    <div class="container vertical layout">
      <iron-image class="flex" style="min-height:300px; background-color: white;" sizing="contain" preload src="[[product.image]]"></iron-image>
      <div>
        <p class="name">[[product.name]]</p>
        <p class="description">[[product.shortDescrition]]</p>
        <p class="price">[[_formatedPrice]]</p>
        <div class="horizontal center-justified layout" style="padding:10px">
          <button on-click="_product_clicked">[[buttonLabel]]</button>
        </div>
      </div>
    </div>
  </template>

  <script>
    Polymer({
      is: 'acre-product',
    
      properties: {
    
        buttonLabel: {
          type: String,
          value: "Adicionar ao pedido"
        },
          
        product: {
          type: Object,
          value: function () {
            return {
              name: '',
              image: '',
              price: '',
              shortDescription: ''
            };
          }
        },
        
        _formatedPrice:{
            type: String,
            computed: '_formatPrice(product.price)'
        }        
      },
    
      // Element Lifecycle
    
      ready: function () {
        // `ready` is called after all elements have been configured, but
        // propagates bottom-up. This element's children are ready, but parents
        // are not.
        //
        // This is the point where you should make modifications to the DOM (when
        // necessary), or kick off any processes the element wants to perform.
      },
    
      attached: function () {
        // `attached` fires once the element and its parents have been inserted
        // into a document.
        //
        // This is a good place to perform any work related to your element's
        // visual state or active behavior (measuring sizes, beginning animations,
        // loading resources, etc).
      },
    
      detached: function () {
        // The analog to `attached`, `detached` fires when the element has been
        // removed from a document.
        //
        // Use this to clean up anything you did in `attached`.
      },
    
      // Element Behavior
    
    
      /**
      * The `add-button-click` event is fired whenever the product button is clicked
      *
      * @event add-button-click
      * @detail {{product: Product}}
      */
      _product_clicked: function () {
        this.fire('add-button-click', { product: this.product });
      },
      
      _formatPrice:function(price){
        if(!price) return price;
          return "R$" + price.toFixed(2);
      }
    });
  </script>
</dom-module>